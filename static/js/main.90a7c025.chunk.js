(this.webpackJsonptiendacovid2=this.webpackJsonptiendacovid2||[]).push([[0],{204:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),o=a.n(n),r=a(18),s=a.n(r),l=(a(71),a(5)),i=a(10),d=Object(n.createContext)(),u=function(e,t){switch(t.type){case"SELECCIONAR_USUARIO":return Object(l.a)(Object(l.a)({},e),{},{username:t.data.username,email:t.data.email,user:t.data.user,cell:t.data.cell});case"INICIAR_SESION":return Object(l.a)(Object(l.a)({},e),{},{autenticado:!0,user:t.data.user,email:t.data.email,token:t.data.token,username:t.data.username,cargando:!1});case"CERRAR_SESION":return localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("user"),localStorage.removeItem("email"),localStorage.removeItem("globalMontoTotal"),localStorage.removeItem("globalQTotal"),localStorage.removeItem("globalPedidos"),localStorage.removeItem("globalMontoDescuentoTotal"),{autenticado:!1,username:null,user:null,token:null,cargando:!0,email:null,cell:null};default:return Object(l.a)({},e)}},b=function(e){var t=Object(n.useReducer)(u,{autenticado:!1,username:null,user:null,email:null,token:null,cargando:!0,cell:null}),a=Object(i.a)(t,2),o=a[0],r=a[1];Object(n.useEffect)((function(){s()}),[]);var s=function(){localStorage.getItem("token")&&localStorage.getItem("email")&&localStorage.getItem("username")&&localStorage.getItem("user")&&r({type:"INICIAR_SESION",data:{token:localStorage.getItem("token"),email:localStorage.getItem("email"),username:localStorage.getItem("username"),user:localStorage.getItem("user")}})};return Object(c.jsx)(d.Provider,{value:{autenticado:o.autenticado,username:o.username,user:o.user,cargando:o.cargando,email:o.email,cerrarSesion:function(){r({type:"CERRAR_SESION"})},seleccionarUsurio:function(e){r({type:"SELECCIONAR_USUARIO",data:Object(l.a)({},e)})},inciarSesionX:function(e){r({type:"INICIAR_SESION",data:Object(l.a)({},e)})}},children:e.children})},j=a(29),m=a(14),p=function(){return Object(c.jsx)("div",{children:"route Admin"})},g=function(){return Object(c.jsx)("div",{children:"Route Auth"})},O=a(15),h=Object(n.createContext)(),x=function(e,t){switch(t.type){case"SELECCIONAR_CATEGORIAMAIN":return Object(l.a)(Object(l.a)({},e),{},{globalObjCategoriaMain:t.data});case"SELECCIONAR_CATEGORIA":return Object(l.a)(Object(l.a)({},e),{},{globalObjCategorias:t.data});case"ACTUALIZAR_GLOBAL_PEDIDOS":return Object(l.a)(Object(l.a)({},e),{},{globalPedidos:t.data});case"MUESTRA_MENU":return Object(l.a)(Object(l.a)({},e),{},{globalZonaMenu:t.data});case"MUESTRA_ZONAVENTA_CARTA":return Object(l.a)(Object(l.a)({},e),{},{globalZonaVentaCarta:t.data});case"MUESTRA_ZONAVENTA_MAPA":return Object(l.a)(Object(l.a)({},e),{},{globalZonaVentaMapa:t.data});case"MUESTRA_BOTON_MAPA":return Object(l.a)(Object(l.a)({},e),{},{globalBotonMapa:t.data});case"MUESTRA_MONTO_TOTAL":return Object(l.a)(Object(l.a)({},e),{},{globalMontoTotal:t.data});case"MUESTRA_MONTO_DESCUENTO_TOTAL":return t.data>0?Object(l.a)(Object(l.a)({},e),{},{globalMontoDescuentoTotal:t.data,globalCheckDelivery:"checked"}):Object(l.a)(Object(l.a)({},e),{},{globalMontoDescuentoTotal:t.data,globalCheckDelivery:""});case"MUESTRA_CANTIDAD_TOTAL":return Object(l.a)(Object(l.a)({},e),{},{globalQTotal:t.data});case"LIMPIAR_VARIABLES":return Object(l.a)(Object(l.a)({},e),{},{globalObjCategoriaMain:[],globalObjModoEntrega:null,globalObjTipoProducto:null,globalMontoTotal:0,globalMontoDescuentoTotal:0,globalCheckDelivery:"",globalQTotal:0,globalPedidos:[],globalZonaMenu:{perfil:-1,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1},globalZonaVentaCarta:!0,globalZonaVentaMapa:!0,globalBotonMapa:!0});default:return Object(l.a)({},e)}},f=function(e){var t=Object(n.useReducer)(x,{globalObjCategoriaMain:[],globalObjCategorias:[],globalObjModoEntrega:null,globalObjTipoProducto:null,globalMontoTotal:0,globalMontoDescuentoTotal:0,globalCheckDelivery:"",globalQTotal:0,globalPedidos:[],globalZonaMenu:{perfil:-1,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1},globalZonaVentaCarta:!0,globalZonaVentaMapa:!0,globalBotonMapa:!0}),a=Object(i.a)(t,2),o=a[0],r=a[1],s=function(e){r({type:"MUESTRA_MONTO_TOTAL",data:e})},d=function(e){r({type:"MUESTRA_MONTO_DESCUENTO_TOTAL",data:e})},u=function(e){r({type:"MUESTRA_CANTIDAD_TOTAL",data:e})},b=[];return Object(n.useEffect)((function(){(b=localStorage.getItem("globalPedidos"))&&r({type:"ACTUALIZAR_GLOBAL_PEDIDOS",data:Object(O.a)(JSON.parse(b))}),localStorage.getItem("globalQTotal")&&u(localStorage.getItem("globalQTotal")),localStorage.getItem("globalMontoTotal")&&s(localStorage.getItem("globalMontoTotal")),localStorage.getItem("globalMontoDescuentoTotal")&&d(localStorage.getItem("globalMontoDescuentoTotal"))}),[]),Object(c.jsx)(h.Provider,{value:{globalObjCategoriaMain:o.globalObjCategoriaMain,globalObjCategorias:o.globalObjCategorias,globalObjModoEntrega:o.globalObjModoEntrega,globalObjTipoProducto:o.globalObjTipoProducto,globalPedidos:o.globalPedidos,globalZonaMenu:o.globalZonaMenu,globalZonaVentaCarta:o.globalZonaVentaCarta,globalZonaVentaMapa:o.globalZonaVentaMapa,globalBotonMapa:o.globalBotonMapa,globalFormularioUsuario:o.globalFormularioUsuario,globalMontoTotal:o.globalMontoTotal,globalMontoDescuentoTotal:o.globalMontoDescuentoTotal,globalQTotal:o.globalQTotal,muestraGlobalMenu:function(e){r({type:"MUESTRA_MENU",data:Object(l.a)({},e)})},muestraGlobalZonaVentaCarta:function(e){r({type:"MUESTRA_ZONAVENTA_CARTA",data:e})},muestraGlobalZonaVentaMapa:function(e){r({type:"MUESTRA_ZONAVENTA_MAPA",data:e})},muestraGlobalBotonMapa:function(e){r({type:"MUESTRA_BOTON_MAPA",data:e})},seleccionarGlobalCategoriaMain:function(e){r({type:"SELECCIONAR_CATEGORIAMAIN",data:Object(O.a)(e)})},seleccionarCategoria:function(e){r({type:"SELECCIONAR_CATEGORIA",data:Object(O.a)(e)})},modificarGlobalPedidos:function(e){r({type:"ACTUALIZAR_GLOBAL_PEDIDOS",data:Object(O.a)(e)})},muestraGlobalMontoTotal:s,muestraGlobalMontoDescuentoTotal:d,muestraGlobalQTotal:u,limpiarGlobalVariables:function(){r({type:"LIMPIAR_VARIABLES",data:""})}},children:e.children})},_=a(7),v=a.n(_),N=a(12),y=a(25),C="https://tcovid20.herokuapp.com",k=function(){var e=Object(N.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/List_All_Products/"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(N.a)(v.a.mark((function e(t){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/List_Product_search/").concat(t,"/"));case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=(a(72),function(){var e=Object(n.useContext)(d).autenticado,t=Object(n.useContext)(h),a=(t.globalZonaVentaCarta,t.muestraGlobalZonaVentaCarta,t.globalZonaVentaMapa),o=t.muestraGlobalZonaVentaMapa,r=t.globalBotonMapa,s=t.muestraGlobalBotonMapa,u=t.seleccionarCategoria,b=Object(n.useState)({producto_buscado:""}),m=Object(i.a)(b,2),p=m[0],g=m[1],O=function(){var e=Object(N.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.producto_buscado&&S(p.producto_buscado).then((function(e){e.length>0&&(console.log(e),u(e))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e){s(e)};return Object(c.jsxs)("nav",{className:"navbar navbar-expand-sm navbar-dark header__navegar",children:[Object(c.jsx)("a",{className:"navbar-brand",href:"#",children:"T-COVID"}),Object(c.jsx)("button",{className:"navbar-toggler d-lg-none",type:"button","data-toggle":"collapse","data-target":"#collapsibleNavId","aria-controls":"collapsibleNavId","aria-expanded":"false","aria-label":"Toggle navigation"}),Object(c.jsxs)("div",{className:"collapse navbar-collapse",id:"collapsibleNavId",children:[Object(c.jsxs)("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(j.b,{to:"/tienda/pedidos",className:"nav-link",activeClassName:"active",onClick:function(){x(!0)},children:"Pedidos"})}),e?Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(j.b,{to:"/tienda/indicadores",className:"nav-link",activeClassName:"active",onClick:function(){x(!1)},children:"Indicadores"})}):Object(c.jsx)(c.Fragment,{})]}),r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"switch__menu"}),Object(c.jsxs)("div",{className:"switch__menu",children:[Object(c.jsx)("input",{type:"checkbox",className:"switch__input",onClick:function(){o(!a)}}),Object(c.jsx)("div",{className:"outer"}),Object(c.jsx)("div",{className:"inner"}),Object(c.jsx)("div",{className:"swith__textmapa",children:"mapa"})]})]}):Object(c.jsx)(c.Fragment,{}),Object(c.jsxs)("form",{className:"form-inline my-2 my-lg-0",onSubmit:function(e){e.preventDefault(),O()},children:[Object(c.jsx)("input",{className:"form-control mr-sm-2 buscador",type:"text",placeholder:"Buscar: producto, precio, stock",name:"producto_buscado",value:p.producto_buscado,onChange:function(e){g(Object(l.a)(Object(l.a)({},O),{},Object(y.a)({},e.target.name,e.target.value)))}}),Object(c.jsx)("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",children:"Buscar"})]})]})]})}),M=a(52),I=function(){var e=Object(N.a)(v.a.mark((function e(t){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/api/orders/"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(N.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/ApiTotalPedidosXProducto/"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(N.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/ApiTotalPedidosXUsuario/"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(N.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/ApiTotalPedidosXDelivery/"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(N.a)(v.a.mark((function e(t){var a,c,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/pedidos_cliente/").concat(t,"/"));case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,n=c.filter((function(e){return"pendiente"===e.state})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(n.useContext)(h).muestraGlobalBotonMapa,t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)([]),l=Object(i.a)(s,2),d=l[0],u=l[1],b=Object(n.useState)([]),j=Object(i.a)(b,2),m=j[0],p=j[1],g=Object(n.useState)([]),O=Object(i.a)(g,2),x=O[0],f=O[1],_=Object(n.useState)([]),v=Object(i.a)(_,2),N=v[0],y=v[1],C=Object(n.useState)([]),k=Object(i.a)(C,2),S=k[0],T=k[1],I=Object(n.useState)(0),P=Object(i.a)(I,2),R=P[0],D=P[1],F=Object(n.useState)(0),G=Object(i.a)(F,2),L=G[0],U=G[1],q=Object(n.useState)(0),Z=Object(i.a)(q,2),z=Z[0],Q=Z[1];return Object(n.useEffect)((function(){e(!1),A().then((function(e){console.log("--WS nueva"),console.log(e);var t=[],a=[],c=0;e.length>0&&(e.forEach((function(e){console.log("- item -"),console.log(e),t.push(e.producto_name),a.push(e.cant_ped),c+=e.cant_ped})),r(t),u(a),U(c))})),w().then((function(e){console.log(e);var t=[],a=[],c=0;e.length>0&&(e.forEach((function(e){t.push(e.usu_name),a.push(e.cant_ped),c+=e.cant_ped})),p(t),f(a),Q(e.length),D(c))})),E().then((function(e){console.log(e);var t=[],a=[];e.length>0&&(e.forEach((function(e){t.push(e.delivery_name),a.push(e.cant_ped)})),y(t),T(a))}))}),[]),Object(c.jsx)("div",{className:"indicadores__principal container-fluid ",children:Object(c.jsxs)("div",{className:"row mt-2 justify-content-center",children:[Object(c.jsxs)("div",{className:"col-md-8 indicador_grupo text-center",children:[Object(c.jsxs)("div",{className:"indicador ",children:["Pedidos",Object(c.jsx)("br",{}),Object(c.jsxs)("strong",{children:["# ",R]})]}),Object(c.jsxs)("div",{className:"indicador ",children:["Productos",Object(c.jsx)("br",{}),Object(c.jsxs)("strong",{children:["# ",L]})]}),Object(c.jsxs)("div",{className:"indicador ",children:["Usuarios",Object(c.jsx)("br",{}),Object(c.jsxs)("strong",{children:["# ",z]})]})]}),Object(c.jsx)("div",{className:"col-md-10",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-8",children:Object(c.jsx)(M.Bar,{width:600,height:400,data:{labels:o,datasets:[{label:"Q",data:d,borderWidth:2,backgroundColor:"#ff9c63",borderColor:"#614ea0"}]},options:{maintainAspectRadio:!1,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{labels:{fontSize:16}},title:{display:!0,text:"Productos mas demandados"}}})}),Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:Object(c.jsx)(M.Pie,{width:600,height:400,data:{labels:N,datasets:[{label:"Q",data:S,borderWidth:1,backgroundColor:"#614ea0",borderColor:"#ff9c63"}]},options:{maintainAspectRadio:!1,responsive:!0,legend:{labels:{fontSize:16}},title:{display:!0,text:"Pedidos por Repartidor"}}})}),Object(c.jsx)("div",{className:"col"}),Object(c.jsx)(M.Bar,{width:400,height:300,data:{labels:m,datasets:[{label:"Q",data:x,borderWidth:2,backgroundColor:"#ff9c63",borderColor:"#614ea0"}]},options:{maintainAspectRadio:!1,responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{labels:{fontSize:16}},title:{display:!0,text:"Pedidos x Usuario"}}})]})})]})})]})})},D=function(){var e=Object(n.useContext)(h),t=e.muestraGlobalMenu,a=e.globalZonaMenu,o=e.globalQTotal,r=Object(n.useContext)(d).autenticado;return Object(c.jsx)("nav",{className:"menu",children:Object(c.jsxs)("ul",{className:"menu__lista",children:[Object(c.jsxs)("li",{onClick:function(){return t({perfil:-1*a.perfil,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1})},children:[Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1607480345/tcovid/user_lka65t.svg",alt:"Perfil"}),r?Object(c.jsx)("span",{className:"badge badge-danger badge-pill",children:"Activo"}):Object(c.jsx)("span",{children:"Perfil"})]}),Object(c.jsxs)("li",{onClick:function(){return t({perfil:-1,registro_usu:-1,olvide_pass:-1,carrito:-1*a.carrito,tracking:-1,chat:-1})},children:[Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1607480342/tcovid/pedidos_3_sjm0zn.svg",alt:"Carrito"}),Object(c.jsx)("span",{className:"badge badge-danger badge-pill",children:o}),Object(c.jsx)("span",{children:"Carrito"})]}),r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("li",{onClick:function(){return t({perfil:-1,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1*a.tracking,chat:-1})},children:[Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1608517275/tcovid/pay_4_guqhxc.svg",alt:"Tracking"}),Object(c.jsx)("span",{children:"Tracking"})]}),Object(c.jsxs)("li",{onClick:function(){return t({perfil:-1,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1*a.chat})},children:[Object(c.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/tiendacovid1.appspot.com/o/1606696866723-contacto_2.png?alt=media&token=57ec854d-c346-4b9e-afaf-9d001d691dc8",alt:"Chat"}),Object(c.jsx)("span",{children:"Chat"})]})]}):Object(c.jsx)(c.Fragment,{})]})})},F=function(){var e=Object(n.useContext)(h).muestraGlobalMenu,t=Object(n.useState)({nombre:"",email:""}),a=Object(i.a)(t,2),o=a[0],r=(a[1],function(){console.log("HandleChange")});return Object(c.jsx)("main",{className:"login",children:Object(c.jsxs)("div",{className:"login__form",children:[Object(c.jsx)("h2",{children:"Olvide Contrase\xf1a"}),Object(c.jsxs)("form",{className:"formulario",onSubmit:function(){console.log("onSubmit")},children:[Object(c.jsx)("label",{htmlFor:"",children:"Nombre:"}),Object(c.jsx)("input",{type:"text",className:"formulario__input",placeholder:"Nombre",name:"nombre",value:o.nombre,onChange:r}),Object(c.jsx)("label",{htmlFor:"",children:"Email:"}),Object(c.jsx)("input",{type:"email",className:"formulario__input",placeholder:"Email",name:"email",value:o.email,onChange:r}),Object(c.jsx)("button",{className:"formulario__submit",type:"submit",children:"Enviar correo"})]}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{className:"login__contrasena",onClick:function(){return e({perfil:1,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1})},children:"Login"})}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{className:"login__contrasena",onClick:function(){return e({perfil:-1,registro_usu:1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1})},children:"Registrate"})})]})})},G=a(30),L=a.n(G),U=function(){var e=Object(N.a)(v.a.mark((function e(t){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/api/users/signup/"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(N.a)(v.a.mark((function e(t,a){var c,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/api/users/login/"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:t,password:a})});case 2:return c=e.sent,e.next=5,c.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Z=(a(204),function(){var e=Object(n.useContext)(d),t=e.inciarSesionX,a=e.autenticado,o=e.cerrarSesion,r=e.username,s=Object(n.useContext)(h),u=s.muestraGlobalMenu,b=s.limpiarGlobalVariables,j=Object(n.useState)({email:"",password:""}),m=Object(i.a)(j,2),p=m[0],g=m[1],O=function(e){g(Object(l.a)(Object(l.a)({},p),{},Object(y.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("main",{className:"login",children:Object(c.jsx)("div",{className:"login__form",children:a?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("h4",{className:"mt-2 ml-2",children:["Hola ",Object(c.jsx)("strong",{children:r}),","]}),Object(c.jsx)("h5",{className:"mt-3 ml-2",children:"Puedes cerrar sesi\xf3n aqui:"}),Object(c.jsx)("button",{className:"btn btn-danger mb-3 ml-2",onClick:function(){o(),b(),L.a.fire({icon:"success",title:"Cerr\xf3 sesi\xf3n",position:"top",timer:1500,showConfirmButton:!1})},children:"Cerrar Sesi\xf3n"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"Login"}),Object(c.jsxs)("form",{className:"formulario",onSubmit:function(e){e.preventDefault(),q(p.email,p.password).then((function(e){var a;e.token&&(console.log(e.token),t({token:e.token,email:e.user.email,username:e.user.username,user:e.user.pk}),u({perfil:-1,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1}),localStorage.setItem("token",e.token),localStorage.setItem("email",e.user.email),localStorage.setItem("username",e.user.username),localStorage.setItem("user",e.user.pk),a=e.user.pk,P(a).then((function(e){e.length>0&&console.log(e)})))}))},children:[Object(c.jsx)("label",{htmlFor:"",children:"Email:"}),Object(c.jsx)("input",{type:"email",className:"formulario__input",placeholder:"Email",name:"email",value:p.email,onChange:O}),Object(c.jsx)("label",{htmlFor:"",children:"Password:"}),Object(c.jsx)("input",{type:"password",className:"formulario__input",placeholder:"Password",name:"password",value:p.password,onChange:O}),Object(c.jsx)("button",{className:"formulario__submit",type:"submit",children:"Iniciar Sesi\xf3n"})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{className:"login__contrasena",onClick:function(){return u({perfil:-1,registro_usu:-1,olvide_pass:1,carrito:-1,tracking:-1,chat:-1})},children:"\xbfOlvidaste tu contrase\xf1a?"}),Object(c.jsx)("p",{className:"login__contrasena",onClick:function(){return u({perfil:-1,registro_usu:1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1})},children:"Registrate"})]})]})})})}),z=function(){var e=Object(n.useContext)(d).seleccionarUsurio,t=Object(n.useContext)(h).muestraGlobalMenu,a=Object(n.useState)({email:"",username:"",photo:null,city:"Lima",country:"Per\xfa",cell:null,password:"",password_confirmation:"",groups:3}),o=Object(i.a)(a,2),r=o[0],s=o[1],u=function(e){s(Object(l.a)(Object(l.a)({},r),{},Object(y.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("main",{className:"login",children:Object(c.jsxs)("div",{className:"login__form",children:[Object(c.jsx)("h2",{children:"Registro"}),Object(c.jsxs)("form",{className:"formulario",onSubmit:function(t){t.preventDefault(),r?U(r).then((function(t){console.log(t),t.password?(e({username:r.username,email:r.email,cell:r.cell}),s({email:"",username:"",photo:null,city:"Lima",country:"Per\xfa",cell:null,password:"",password_confirmation:"",groups:3}),console.log("usuario creado con \xe9xito"),L.a.fire({icon:"success",title:"Usuario Creado",text:"Usuario creado exitosamente!!!",timer:1500,position:"top",showConfirmButton:!1})):L.a.fire({icon:"error",title:"Error",text:"Ups hubo un error, intente nuevamente...",timer:1500,position:"top",showConfirmButton:!0})})):console.log("no hay formulario")},children:[Object(c.jsx)("label",{htmlFor:"",children:"Nombre:"}),Object(c.jsx)("input",{type:"text",className:"formulario__input",placeholder:"Nombre",name:"username",value:r.username,onChange:u}),Object(c.jsx)("label",{htmlFor:"",children:"Email:"}),Object(c.jsx)("input",{type:"email",className:"formulario__input",placeholder:"Email",name:"email",value:r.email,onChange:u}),Object(c.jsx)("label",{htmlFor:"",children:"Password:"}),Object(c.jsx)("input",{type:"password",className:"formulario__input",placeholder:"Password",name:"password",value:r.password,onChange:u}),Object(c.jsx)("label",{htmlFor:"",children:"Repite Password:"}),Object(c.jsx)("input",{type:"password",className:"formulario__input",placeholder:"Password",name:"password_confirmation",value:r.password_confirmation,onChange:u}),Object(c.jsx)("button",{className:"formulario__submit",type:"submit",children:"Registrarse"})]}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{className:"login__contrasena",onClick:function(){return t({perfil:1,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1})},children:"Login"})}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{className:"login__contrasena",onClick:function(){return t({perfil:-1,registro_usu:-1,olvide_pass:1,carrito:-1,tracking:-1,chat:-1})},children:"Olvide contrase\xf1a"})})]})})},Q=a(20),B=a.n(Q),V=function(){var e,t=Object(n.useContext)(d).user,a=Object(n.useContext)(h),o=a.globalMontoTotal,r=a.globalMontoDescuentoTotal,s=a.globalPedidos,u=a.modificarGlobalPedidos,b=a.muestraGlobalMontoTotal,j=a.muestraGlobalQTotal,m=a.muestraGlobalMontoDescuentoTotal,p=a.muestraGlobalMenu,g=Object(n.useState)(!1),O=Object(i.a)(g,2),x=O[0],f=O[1],_="";null===(e=s[0])||void 0===e||e.orderdetail.forEach((function(e){e.quantity>0&&(_="".concat(_," // ").concat(e.name_product," (").concat(e.quantity,")"))}));var y=[Object(l.a)(Object(l.a)({},s[0]),{},{address:"Jr. Hernan Cortez 1091, El Agustino, Lima,Per\xfa",total_cost:o-0+(r-0),order_lat:"-12.5429900",order_lon:"-74.6086300",datedelivery:B()(B()().add(2,"days").toDate()).format("YYYY-MM-DD"),user:t})];console.log("pedidos final"),console.log(y);var C=Object(n.useRef)();return Object(n.useEffect)((function(){window.paypal.Buttons({createOrder:function(e,t,a){return t.order.create({intent:"CAPTURE",purchase_units:[{description:_,amount:{currency_code:"USD",value:o-0+(r-0)}}]})},onApprove:function(){var e=Object(N.a)(v.a.mark((function e(t,a){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inicio pago"),e.next=3,a.order.capture();case 3:c=e.sent,f(!0),console.log(c),console.log("termin\xf3 el pago"),I(y[0]).then((function(e){console.log(e),e&&(u([]),j(0),b(0),m(0),p({perfil:-1,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1}),localStorage.removeItem("globalPedidos"),localStorage.removeItem("globalMontoTotal"),localStorage.removeItem("globalMontoDescuentoTotal"),localStorage.removeItem("globalQTotal"),localStorage.removeItem("globalPedidos"),localStorage.removeItem("__paypal_storage__"),L.a.fire({title:"Pago Exitoso",icon:"success",text:"Pago realizado exitosamente!!!",position:"top",timer:1500,showConfirmButton:!1}))}));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onError:function(e){console.log(e)}}).render(C.current)}),[t]),Object(c.jsx)("div",{children:x?Object(c.jsx)("div",{children:Object(c.jsx)("h3",{children:"Felicitaciones!!!"})}):Object(c.jsx)("div",{className:"mt-4",children:Object(c.jsx)("div",{ref:C})})})},Y=function(e){var t=e.objPedidoUsu,a=Object(n.useContext)(h),o=a.globalPedidos,r=a.modificarGlobalPedidos,s=a.globalMontoTotal,l=a.muestraGlobalMontoTotal,i=a.globalQTotal,d=a.muestraGlobalQTotal,u=function(e,t){var a=[];o[0].orderdetail.find((function(e){return e.product===t.product}))&&(a=Object(O.a)(o.map((function(a){return a.orderdetail.forEach((function(a){a.product===t.product&&("incrementar"===e?(a.quantity+=1,l(s-0+(a.price_prod-0)),d(i-0+1),localStorage.setItem("globalMontoTotal",s-0+(a.price_prod-0)),localStorage.setItem("globalQTotal",i-0+1)):a.quantity>0&&(a.quantity-=1,l(s-0-(a.price_prod-0)),d(i-0-1),localStorage.setItem("globalMontoTotal",s-0-(a.price_prod-0)),localStorage.setItem("globalQTotal",i-0-1)))})),a}))),a=Object(O.a)(a.map((function(e){return e.orderdetail.filter((function(e){return e.quantity>0})),e}))),r(a),localStorage.setItem("globalPedidos",JSON.stringify(a)))};return Object(c.jsx)("div",{className:"card-body",children:t.map((function(e){if(e.quantity>0)return Object(c.jsxs)("div",{className:"row mb-1",children:[Object(c.jsxs)("div",{className:"col-md-8",children:[Object(c.jsxs)("strong",{children:[e.name_product,": "]}),Object(c.jsx)("span",{className:"badge badge-danger badge-pill",children:e.quantity}),Object(c.jsx)("small",{children:e.description_prod})]}),Object(c.jsxs)("div",{className:"col-md-4 d-flex justify-content-between",children:[Object(c.jsx)("p",{className:"card_sumaped",onClick:function(){u("decrementar",e)},children:"-1"}),Object(c.jsx)("strong",{children:Object(c.jsxs)("small",{children:[" S/ ",+e.price_prod," "]})}),Object(c.jsx)("p",{className:"card_sumaped",onClick:function(){u("incrementar",e)},children:"+1"})]})]},e.product)}))})},J=function(){var e=Object(n.useContext)(d).autenticado,t=Object(n.useContext)(h),a=t.globalPedidos,o=t.globalMontoTotal,r=t.muestraGlobalMenu,s=t.globalZonaMenu,l=t.muestraGlobalMontoDescuentoTotal,u=t.globalMontoDescuentoTotal,b=t.globalCheckDelivery,j=Object(n.useState)(!1),m=Object(i.a)(j,2),p=m[0],g=m[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"card__controlaltura",children:Object(c.jsxs)("div",{className:"card card__controlPago",children:[Object(c.jsx)("div",{className:"card-header",children:"Pedidos:"}),a?a.map((function(t){return console.log(b),Object(c.jsxs)("div",{children:[Object(c.jsx)(Y,{objPedidoUsu:t.orderdetail}),Object(c.jsxs)("div",{className:"card-footer",children:["total:",Object(c.jsxs)("strong",{children:["S/. ",o-0+(u-0)]}),Object(c.jsxs)("small",{children:[" (",Object(c.jsx)("strong",{children:u>0?Object(c.jsx)(c.Fragment,{children:"SI"}):Object(c.jsx)(c.Fragment,{children:"NO"})})," incluye delivery)"]}),Object(c.jsxs)("div",{className:"card__delivery float-left mb-1 mr-3",children:[Object(c.jsx)("input",{className:"card__delivery_input",type:"checkbox",id:t.dateorder,onClick:function(){return function(e){console.log(e),document.getElementById(e.dateorder).addEventListener("change",(function(){this.checked?(console.log("check"),localStorage.setItem("globalMontoDescuentoTotal",e.delivery_cost),l(e.delivery_cost)):(console.log("Uncheck"),l(0),localStorage.setItem("globalMontoDescuentoTotal",0))}))}(t)}}),Object(c.jsx)("label",{htmlFor:t.dateorder,children:Object(c.jsx)("span",{className:"".concat(u>0&&"card__delivery_labelspan")})}),Object(c.jsx)("label",{htmlFor:t.dateorder,children:Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1608517163/tcovid/delivery_2_n54ykh.svg",alt:"imagen de delivery"})})]}),p?Object(c.jsx)(V,{}):e?Object(c.jsx)("button",{className:"btn btn-danger float-right mb-1",onClick:function(){g(!0)},children:"Pagar"}):Object(c.jsx)("button",{className:"btn btn-danger float-right mb-1",onClick:function(){return r({perfil:-1*s.perfil,registro_usu:-1,olvide_pass:-1,carrito:-1,tracking:-1,chat:-1})},children:"Login"})]})]},t.dateorder)})):Object(c.jsx)("div",{children:"No hay pedidos..."})]})})})},H=a(229),W=function(){var e=Object(n.useContext)(d).user,t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],r=a[1];return Object(n.useEffect)((function(){e&&P(e).then((function(e){console.log("pedidos usuario"),console.log(e),e&&r(e)}))}),[e]),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"card__controlaltura",children:Object(c.jsxs)("div",{className:"card card__tracking",children:[Object(c.jsx)("div",{className:"card-header",children:Object(c.jsx)("strong",{children:"Tracking:"})}),Object(c.jsx)(H.a,{children:o?o.map((function(e,t){return Object(c.jsxs)(H.a.Item,{children:[Object(c.jsxs)("h5",{className:"text-center mt-4 mb-0",children:["Pedido # ",e.pk]}),Object(c.jsx)("img",{className:"d-block  carousel_img",src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1607915120/tcovid/transparente_z0ky9u.png",alt:"Pedido #"}),Object(c.jsx)(H.a.Caption,{children:Object(c.jsx)("div",{className:"contanier",children:Object(c.jsxs)("div",{className:"row justify-content-center text-center",children:[Object(c.jsx)("div",{className:"col-md-8 mt-0 tracking_text",children:Object(c.jsxs)("div",{children:["Pagando",Object(c.jsx)("br",{}),Object(c.jsx)("small",{children:e.dateorder})]})}),Object(c.jsxs)("div",{className:"col-md-4 mt-0",children:[Object(c.jsx)("div",{className:"tracking__estado",children:Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1607885839/tcovid/check_fqmwyw.svg",className:"tracking__img",alt:"Perfil"})}),Object(c.jsx)("div",{className:"trackin__linea_abajo"})]}),Object(c.jsx)("div",{className:"col-md-8 mt-4 tracking_text",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Preparando"}),Object(c.jsx)("br",{}),Object(c.jsx)("small",{})]})}),Object(c.jsxs)("div",{className:"col-md-4 mt-4",children:[Object(c.jsx)("div",{className:"tracking__estado",children:"..."}),Object(c.jsx)("div",{className:"trackin__linea_abajo"})]}),Object(c.jsx)("div",{className:"col-md-8 mt-4 tracking_text",children:Object(c.jsxs)("div",{children:["En ruta",Object(c.jsx)("br",{}),Object(c.jsx)("small",{})]})}),Object(c.jsxs)("div",{className:"col-md-4 mt-4",children:[Object(c.jsx)("div",{className:"tracking__estado"}),Object(c.jsx)("div",{className:"trackin__linea_abajo"})]}),Object(c.jsx)("div",{className:"col-md-8 mt-4 tracking_text",children:Object(c.jsxs)("div",{children:["Entregado",Object(c.jsx)("br",{}),Object(c.jsxs)("small",{children:["Aprox: ",e.datedelivery]})]})}),Object(c.jsx)("div",{className:"col-md-4 mt-4 mb-4",children:Object(c.jsx)("div",{className:"tracking__estado"})})]})})})]},e.pk+B()())})):Object(c.jsx)("h3",{children:"No hay pedidos pendientes..."})}),Object(c.jsx)("div",{className:"card-footer"})]})})})},X=function(){var e=Object(n.useContext)(h).globalZonaMenu;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{children:[1===e.perfil?Object(c.jsx)(Z,{}):Object(c.jsx)(c.Fragment,{}),1===e.registro_usu?Object(c.jsx)(z,{}):Object(c.jsx)(c.Fragment,{}),1===e.olvide_pass?Object(c.jsx)(F,{}):Object(c.jsx)(c.Fragment,{}),1===e.carrito?Object(c.jsx)(J,{}):Object(c.jsx)(c.Fragment,{}),1===e.tracking?Object(c.jsx)(W,{}):Object(c.jsx)(c.Fragment,{})]})})},K=a(69),$=(a(205),function(){return Object(c.jsxs)("div",{children:["Tienda Ofertas",Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:function(){return Object(K.b)("Wow so easy !")},children:"Notify !"}),Object(c.jsx)(K.a,{}),Object(c.jsx)(V,{})]}),Object(c.jsxs)(H.a,{children:[Object(c.jsxs)(H.a.Item,{children:[Object(c.jsx)("img",{className:"d-block  carousel_img",src:"https://firebasestorage.googleapis.com/v0/b/tiendacovid1.appspot.com/o/1606687771074-producto_isopado.jpg?alt=media&token=d8ca9f88-8ed3-434e-8ed7-b8908222ab2c",alt:"First slide"}),Object(c.jsxs)(H.a.Caption,{children:[Object(c.jsx)("h3",{children:"First slide label"}),Object(c.jsx)("p",{children:"Nulla vitae elit libero, a pharetra augue mollis interdum."})]})]}),Object(c.jsxs)(H.a.Item,{children:[Object(c.jsx)("img",{className:"d-block carousel_img",src:"https://firebasestorage.googleapis.com/v0/b/tiendacovid1.appspot.com/o/1606688094835-prueba_rapida.jpg?alt=media&token=ab3972a5-cac3-4c9a-b47b-c9c93d8c278f",alt:"Third slide"}),Object(c.jsxs)(H.a.Caption,{children:[Object(c.jsx)("h3",{children:"Second slide label"}),Object(c.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."})]})]}),Object(c.jsxs)(H.a.Item,{children:[Object(c.jsx)("img",{className:"d-block carousel_img",src:"https://firebasestorage.googleapis.com/v0/b/tiendacovid1.appspot.com/o/1606688759379-mascarilla.png?alt=media&token=45d5baab-072a-47f9-876c-4ee2ca209d48",alt:"Third slide"}),Object(c.jsxs)(H.a.Caption,{children:[Object(c.jsx)("h3",{children:"Third slide label"}),Object(c.jsx)("p",{children:"Praesent commodo cursus magna, vel scelerisque nisl consectetur."})]})]})]})]})}),ee=function(){var e=Object(N.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/List_MainCategoryCategory_Products/"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(N.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/List_Category_Products/"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(n.useContext)(h),t=e.globalObjCategoriaMain,a=e.seleccionarCategoria,o=e.seleccionarGlobalCategoriaMain,r=Object(n.useState)([]),s=Object(i.a)(r,2),l=s[0],d=s[1],u=function(){var e=Object(N.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te().then((function(e){o(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){u()}),[]);return Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsx)("div",{className:"row mb-2",children:Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsx)("ul",{className:"categorias_lista",children:t?t.map((function(e){return Object(c.jsxs)("li",{children:[Object(c.jsx)("input",{type:"checkbox",id:e.pk,onChange:function(){!function(e){var t=document.getElementById(e.pk),c=[];t.addEventListener("change",(function(){this.checked?(console.log("check"),d(Object(O.a)(l).concat(e.product)),a(Object(O.a)(l).concat(e.product))):(c=Object(O.a)(l),e.product.forEach((function(e){c=c.filter((function(t){return t.pk!==e.pk}))})),a(c),d(c))}))}(e)}}),Object(c.jsxs)("label",{htmlFor:e.pk,children:[e.name,Object(c.jsx)("span",{className:"badge badge-danger badge-pill ",children:e.product.length})]})]},e.pk)})):Object(c.jsx)("span",{children:"Selecciona alguna categoria..."})})})})})},ce=function(){var e=Object(n.useContext)(h).seleccionarGlobalCategoriaMain,t=Object(n.useState)([]),a=Object(i.a)(t,2),o=a[0],r=a[1];Object(n.useEffect)((function(){ee().then((function(e){r(e)}))}),[]);return Object(c.jsx)("nav",{className:"menu",children:Object(c.jsx)("ul",{className:"menu__lista",children:o?o.map((function(t){return Object(c.jsxs)("li",{onClick:function(){return a=t.category,void e(a);var a},children:[Object(c.jsx)("img",{src:t.image,alt:""}),Object(c.jsx)("span",{className:"badge badge-danger badge-pill",children:t.category.length}),Object(c.jsx)("span",{children:t.name})]},t.pk)})):Object(c.jsx)("span",{children:"Cargando..."})})})},ne=function(){var e=Object(n.useContext)(d).email,t=Object(n.useContext)(h),a=t.globalObjCategorias,o=t.seleccionarCategoria,r=t.globalPedidos,s=t.modificarGlobalPedidos,i=t.globalMontoTotal,u=t.muestraGlobalMontoTotal,b=t.globalQTotal,j=t.muestraGlobalQTotal,m=function(){var e=Object(N.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k().then((function(e){e.length&&o(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){m()}),[]);var p=function(e){if(r.length>0){var t=r[0].orderdetail.find((function(t){return t.product===e}));if(t)return t.quantity}return 0},g=function(t,a){var c=[];if(r.length>0){var n=r[0].orderdetail;n.find((function(e){return e.product===a.pk}))?(c=Object(O.a)(r.map((function(e){return e.orderdetail.forEach((function(e){e.product===a.pk&&("incrementar"===t?(e.quantity+=1,u(i-0+(e.price_prod-0)),localStorage.setItem("globalMontoTotal",i-0+(e.price_prod-0)),j(b-0+1),localStorage.setItem("globalQTotal",b-0+1)):e.quantity>0&&(e.quantity-=1,u(i-0-(e.price_prod-0)),j(b-0-1),localStorage.setItem("globalMontoTotal",i-0-(e.price_prod-0)),localStorage.setItem("globalQTotal",b-0-1)))})),e}))),c=Object(O.a)(c.map((function(e){return e.orderdetail.filter((function(e){return e.quantity>0})),e})))):(n.push({product:a.pk,store:a.store,name_product:a.name,image_product:a.image,quantity:1,discount:"0.00",description_prod:a.description,price_prod:a.price}),c=[Object(l.a)(Object(l.a)({},r[0]),{},{orderdetail:n})],u(i-0+(a.price-0)),j(b-0+1),localStorage.setItem("globalMontoTotal",i-0+(a.price-0)),localStorage.setItem("globalQTotal",b-0+1)),s(c),localStorage.setItem("globalPedidos",JSON.stringify(c))}else"incrementar"===t&&(c=[{email_user:e||"",dateorder:B()().format("YYYY-MM-DD"),state:"pendiente",delivery:!0,delivery_cost:"10.00",total_cost:a.price,deliveryman:1,name_deliveryman:"Chamito1",orderdetail:[{product:a.pk,store:a.store,name_store:a.store_name,name_product:a.name,image_product:a.image,quantity:1,discount:"0.00",description_prod:a.description,price_prod:a.price}]}],s(c),u(i-0+(a.price-0)),j(b-0+1),localStorage.setItem("globalMontoTotal",a.price),localStorage.setItem("globalQTotal",1),console.log(c),localStorage.setItem("globalPedidos",JSON.stringify(c)))};return Object(c.jsx)("div",{className:"zonaventa__productos",children:Object(c.jsx)("section",{className:"zonaventa__principal",children:a?a.map((function(e){return Object(c.jsxs)("div",{className:"zonaventa__card",children:[Object(c.jsxs)("div",{className:"card__zonaSuperior",children:[Object(c.jsx)("img",{src:e.image,alt:"imgen de producto"}),100*e.offer===0?Object(c.jsx)(c.Fragment,{}):Object(c.jsxs)("p",{className:"card__dcto",children:["Dscto. ",100*e.offer,"%"]}),Object(c.jsxs)("p",{className:"card__conteo",children:[Object(c.jsx)("span",{children:r?p(e.pk):0}),Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1608516952/tcovid/carrito_rrwbua.svg",height:"10",alt:"imgen de carrito compras"})]}),Object(c.jsx)("p",{className:"card__suma",onClick:function(){g("incrementar",e)},children:"+1"}),Object(c.jsx)("p",{className:"card__resta",onClick:function(){g("decrementar",e)},children:"-1"}),Object(c.jsx)("p",{className:"card__empresa",children:e.store_name}),Object(c.jsx)("p",{className:"card__producto",children:e.name})]}),Object(c.jsxs)("div",{className:"card__zonaInferior",children:[Object(c.jsx)("p",{className:"zonaInferior_datos",children:e.store_hour_sem}),Object(c.jsx)("p",{className:"zonaInferior_datos",children:e.store_hour_fsem}),Object(c.jsxs)("div",{className:"card__descripcion",children:[Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1608517163/tcovid/delivery_2_n54ykh.svg",alt:"",height:"20"})," Delivery"]}),Object(c.jsx)("p",{className:"zonaInferior_datos card__subtitulo",children:"Ver mas..."}),Object(c.jsxs)("p",{className:"card__descripcion",children:[Object(c.jsx)("i",{className:"far fa-building"}),e.store_address]}),Object(c.jsxs)("p",{className:"card__precio",children:["S/. ",e.price]})]})]},e.pk+B()().format("YYYYMMDDhhmmss"))})):Object(c.jsx)("span",{children:"Cargando Productos..."})})})},oe=a(6),re=a(90),se=a(93),le=a(91),ie=a(92),de=a(4),ue=a.n(de),be=a.p+"static/media/nurse.2e173f59.svg",je=a.p+"static/media/mi_ubicacion.ad6fcb63.svg",me=a(68),pe=function(){var e=Object(N.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(C,"/tienda_productos/"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(n.useContext)(d).email,t=Object(n.useContext)(h),a=(t.globalObjCategorias,t.seleccionarCategoria,t.globalPedidos),o=t.modificarGlobalPedidos,r=t.globalMontoTotal,s=t.muestraGlobalMontoTotal,u=t.globalQTotal,b=t.muestraGlobalQTotal,j=Object(n.useState)([]),m=Object(i.a)(j,2),p=m[0],g=m[1],x=Object(me.OpenStreetMapProvider)(),f=Object(oe.d)(me.SearchControl),_=Object(n.useState)({latitude:0,longitude:0}),v=Object(i.a)(_,2),N=v[0],y=v[1];Object(n.useEffect)((function(){pe().then((function(e){console.log("ffffff"),console.log(e),g(e)})),navigator.geolocation.getCurrentPosition((function(e){y({latitude:e.coords.latitude,longitude:e.coords.longitude})}),(function(e){console.log(e)}),{enableHighAccuracy:!0})}),[]);var C=ue.a.icon({iconUrl:be,iconSize:[78,55],shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}),k=ue.a.icon({iconUrl:je,iconSize:[78,55],shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}),S=function(e){if(a.length>0){var t=a[0].orderdetail.find((function(t){return t.product===e}));if(t)return t.quantity}return 0},T=function(t,c){var n=[];if(a.length>0){var i=a[0].orderdetail;i.find((function(e){return e.product===c.pk}))?(n=Object(O.a)(a.map((function(e){return e.orderdetail.forEach((function(e){e.product===c.pk&&("incrementar"===t?(e.quantity+=1,s(r-0+(e.price_prod-0)),localStorage.setItem("globalMontoTotal",r-0+(e.price_prod-0)),b(u-0+1),localStorage.setItem("globalQTotal",u-0+1)):e.quantity>0&&(e.quantity-=1,s(r-0-(e.price_prod-0)),b(u-0-1),localStorage.setItem("globalMontoTotal",r-0-(e.price_prod-0)),localStorage.setItem("globalQTotal",u-0-1)))})),e}))),n=Object(O.a)(n.map((function(e){return e.orderdetail.filter((function(e){return e.quantity>0})),e})))):(i.push({product:c.pk,store:c.store,name_product:c.name,image_product:c.image,quantity:1,discount:"0.00",description_prod:c.description,price_prod:c.price}),n=[Object(l.a)(Object(l.a)({},a[0]),{},{orderdetail:i})],s(r-0+(c.price-0)),b(u-0+1),localStorage.setItem("globalMontoTotal",r-0+(c.price-0)),localStorage.setItem("globalQTotal",u-0+1)),o(n),localStorage.setItem("globalPedidos",JSON.stringify(n))}else"incrementar"===t&&(n=[{email_user:e||"",dateorder:B()().format("YYYY-MM-DD"),state:"pendiente",delivery:!0,delivery_cost:"10.00",total_cost:c.price,deliveryman:1,name_deliveryman:"Chamito1",orderdetail:[{product:c.pk,store:c.store,name_store:c.store_name,name_product:c.name,image_product:c.image,quantity:1,discount:"0.00",description_prod:c.description,price_prod:c.price}]}],o(n),s(r-0+(c.price-0)),b(u-0+1),localStorage.setItem("globalMontoTotal",c.price),localStorage.setItem("globalQTotal",1),console.log(n),localStorage.setItem("globalPedidos",JSON.stringify(n)))};return Object(c.jsxs)(re.a,{center:[N.latitude,N.longitude],zoom:13,className:"zona__mapa",ondblclick:function(e){console.log(ue.a.marker(e.latlng)),console.log(e.latlng.lat),console.log(e.latlng.lng),y({latitude:e.latlng.lat,longitude:e.latlng.lng})},children:[Object(c.jsx)(se.a,{url:"https://api.mapbox.com/styles/v1/pedromolina/ckhigjlv703y319s1cvxixe5q/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoicGVkcm9tb2xpbmEiLCJhIjoiY2tlcHRpOHRzMTRhMTJxbzl2bXBjZTZsbCJ9.XFHiwM8wfOYS2Vu6KrWWQA",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),Object(c.jsx)(le.a,{position:[N.latitude,N.longitude],icon:k,children:Object(c.jsx)(f,{provider:x,showMarker:!1,showPopup:!1,popupFormat:function(e){e.query;return e.result.label},maxMarkers:3,retainZoomLevel:!1,animateZoom:!0,autoClose:!1,searchLabel:"ejm: av.Brasil 2020, Jesus Maria, Lima",keepResult:!0})}),p?p.map((function(e){return e?Object(c.jsx)(le.a,{position:[e.shop_lat,e.shop_lon],icon:C,children:Object(c.jsx)(ie.a,{children:Object(c.jsx)(H.a,{children:e?e.productstore.map((function(t){return!t||t.length<=0?Object(c.jsx)(c.Fragment,{}):Object(c.jsxs)(H.a.Item,{children:[Object(c.jsx)("img",{className:"d-block  carousel_img_mapa",src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1607915120/tcovid/transparente_z0ky9u.png",alt:"fondo transparente"}),Object(c.jsx)(H.a.Caption,{children:Object(c.jsxs)("div",{className:"zonaventa__card",children:[Object(c.jsxs)("div",{className:"card__zonaSuperior",children:[Object(c.jsx)("img",{src:t.image,alt:"imgen de producto"}),100*t.offer===0?Object(c.jsx)(c.Fragment,{}):Object(c.jsxs)("p",{className:"card__dcto",children:["Dscto. ",100*t.offer,"%"]}),Object(c.jsxs)("p",{className:"card__conteo",children:[Object(c.jsx)("span",{children:a?S(t.pk):0}),Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1608516952/tcovid/carrito_rrwbua.svg",height:"10",alt:"imgen de carrito compras"})]}),Object(c.jsx)("p",{className:"card__suma",onClick:function(){T("incrementar",t)},children:"+1"}),Object(c.jsx)("p",{className:"card__resta",onClick:function(){T("decrementar",t)},children:"-1"}),Object(c.jsx)("p",{className:"card__empresa",children:t.store_name}),Object(c.jsx)("p",{className:"card__producto",children:t.name})]}),Object(c.jsxs)("div",{className:"card__zonaInferior",children:[Object(c.jsx)("p",{className:"zonaInferior_datos",children:t.store_hour_sem}),Object(c.jsx)("p",{className:"zonaInferior_datos",children:t.store_hour_fsem}),Object(c.jsxs)("div",{className:"card__descripcion",children:[Object(c.jsx)("img",{src:"https://res.cloudinary.com/dqcdixbty/image/upload/v1608517163/tcovid/delivery_2_n54ykh.svg",alt:"",height:"20"})," Delivery"]}),Object(c.jsx)("p",{className:"zonaInferior_datos card__subtitulo",children:"Ver mas..."}),Object(c.jsxs)("p",{className:"card__descripcion",children:[Object(c.jsx)("i",{className:"far fa-building"}),t.store_address]}),Object(c.jsxs)("p",{className:"card__precio",children:["S/. ",t.price]})]})]})})]},e.pk+t.pk)})):Object(c.jsx)(c.Fragment,{})})})},e.pk):Object(c.jsx)(c.Fragment,{})})):Object(c.jsx)(c.Fragment,{})]})},Oe=function(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"container-fluid zonaventa__ubicaciones",children:[Object(c.jsx)("div",{className:"row ubicaciones__texto",children:Object(c.jsx)("div",{children:"Digita o doble click a tu ubicci\xf3n"})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col zona__mapaprincipal ",children:Object(c.jsx)(ge,{})})})]})})},he=function(){var e=Object(n.useContext)(h).globalZonaVentaMapa;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"fanel_panelcontrol_izq ",children:Object(c.jsx)(ce,{})}),Object(c.jsx)("section",{className:"zonaventa",children:Object(c.jsxs)("section",{className:"zonaventa__tabla container-fluid",children:[Object(c.jsx)(ae,{}),Object(c.jsx)("div",{className:"zonaventa__pedido",children:e?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ne,{}),Object(c.jsx)(Oe,{})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Oe,{}),Object(c.jsx)(ne,{})]})})]})})]})},xe=function(e){var t=e.path,a=e.component;return Object(n.useContext)(d).autenticado?Object(c.jsx)(m.b,{path:t,component:a}):Object(c.jsx)(m.a,{to:"/"})},fe=function(){return Object(c.jsx)(f,{children:Object(c.jsx)("section",{className:"fanel_pedidos container-fluid",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"fanel_tienda col-sm-12",children:[Object(c.jsx)(T,{}),Object(c.jsx)("main",{className:"tienda_container",children:Object(c.jsxs)(m.d,{children:[Object(c.jsx)(xe,{path:"/tienda/indicadores",component:R}),Object(c.jsx)(m.b,{path:"/tienda/ofertas",component:$}),Object(c.jsx)(m.b,{path:"/tienda/pedidos",component:he}),Object(c.jsx)(m.b,{path:"/",component:he})]})})]}),Object(c.jsx)("div",{className:"fanel_panelcontrol2 ",children:Object(c.jsx)(X,{})}),Object(c.jsx)("div",{className:"fanel_panelcontrol ",children:Object(c.jsx)(D,{})})]})})})},_e=function(){return Object(c.jsx)(j.a,{basename:"/",children:Object(c.jsxs)(m.d,{children:[Object(c.jsx)(m.b,{path:"/auth",component:g}),Object(c.jsx)(m.b,{path:"/admin",component:p}),Object(c.jsx)(m.b,{path:"/",component:fe})]})})},ve=function(){return new Promise((function(e){return setTimeout(e,100)})).then((function(){var e=document.getElementById("ipl-progress-indicator");e&&e.classList.add("available")})),Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(b,{children:Object(c.jsx)(_e,{})})})};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(ve,{})}),document.getElementById("root"))},71:function(e,t,a){},72:function(e,t,a){}},[[226,1,2]]]);
//# sourceMappingURL=main.90a7c025.chunk.js.map